---
title: 14.1.åŒ…Crate
date: 2023-10-07 19:11:41
tags: Rust
categories: Rust By Practice
---
package æ˜¯ä½ é€šè¿‡ Cargo åˆ›å»ºçš„å·¥ç¨‹æˆ–é¡¹ç›®ï¼Œå› æ­¤åœ¨ package çš„æ ¹ç›®å½•ä¸‹ä¼šæœ‰ä¸€ä¸ª Cargo.toml æ–‡ä»¶ã€‚
<!--more-->
### 1.ğŸŒŸ åˆ›å»ºä¸€ä¸ª packageï¼Œæ‹¥æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„:
Q:
```sh
.
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src
    â””â”€â”€ main.rs

1 directory, 2 files

# in Cargo.toml
[package]
name = "hello-package"
version = "0.1.0"
edition = "2021"
```
A:
```sh
cargo new hello-package
```
> æ³¨æ„! æˆ‘ä»¬ä¼šåœ¨åŒ…ä¸æ¨¡å—ä¸­ä½¿ç”¨ä¸Šé¢çš„é¡¹ç›®ä½œä¸ºæ¼”ç¤ºï¼Œå› æ­¤ä¸è¦åˆ é™¤
### 2.ğŸŒŸ åˆ›å»ºä¸€ä¸ª packageï¼Œæ‹¥æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„:
Q:
```sh
.
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src
    â””â”€â”€ lib.rs

1 directory, 2 files

# in Cargo.toml
[package]
name = "hello-package1"
version = "0.1.0"
edition = "2021"
```
A:
```sh
cargo new --lib hello-package1
```
> è¯¥é¡¹ç›®å¯ä»¥å®‰å…¨çš„ç§»é™¤
### 3.ğŸŒŸ
/* ä½¿ç”¨ä½ çš„ç­”æ¡ˆå¡«ç©º */

Q: package 1# å’Œ 2# çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ ?

A:

hello-packageæœ‰ä¸€ä¸ªäºŒè¿›åˆ¶crateå«hello-package, src/main.rsæ˜¯æ ¹crate.

hello-pacakge1æœ‰ä¸€ä¸ªåº“crateå«hello-package1, src/lib.rsæ˜¯æ ¹crate.
## åŒ…Crate
ä¸€ä¸ªåŒ…å¯ä»¥æ˜¯äºŒè¿›åˆ¶ä¹Ÿå¯ä»¥ä¸€ä¸ªä¾èµ–åº“ã€‚æ¯ä¸€ä¸ªåŒ…éƒ½æœ‰ä¸€ä¸ªåŒ…æ ¹ï¼Œä¾‹å¦‚äºŒè¿›åˆ¶åŒ…çš„åŒ…æ ¹æ˜¯ src/main.rsï¼Œåº“åŒ…çš„åŒ…æ ¹æ˜¯ src/lib.rsã€‚åŒ…æ ¹æ˜¯ç¼–è¯‘å™¨å¼€å§‹å¤„ç†æºä»£ç æ–‡ä»¶çš„åœ°æ–¹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åŒ…æ¨¡å—æ ‘çš„æ ¹éƒ¨ã€‚

åœ¨ package hello-package ä¸­ï¼Œæœ‰ä¸€ä¸ªäºŒè¿›åˆ¶åŒ…ï¼Œè¯¥åŒ…ä¸ package åŒå : hello-package, å…¶ä¸­ src/main.rs æ˜¯è¯¥äºŒè¿›åˆ¶åŒ…çš„åŒ…æ ¹.

ä¸ hello-package ç±»ä¼¼, hello-package1 åŒæ ·åŒ…å«ä¸€ä¸ªåŒ…ï¼Œä½†æ˜¯ä¸ä¹‹å‰çš„äºŒè¿›åˆ¶åŒ…ä¸åŒï¼Œè¯¥ package åŒ…å«çš„æ˜¯åº“åŒ…ï¼Œå…¶ä¸­ src/lib.rs æ˜¯å…¶åŒ…æ ¹.
### 4.ğŸŒŸ
Q: package `hello-package1` ä¸­çš„åº“åŒ…åç§°æ˜¯?

A: hello-package1
### 5.ğŸŒŸğŸŒŸ ä¸º hello-package æ·»åŠ ä¸€ä¸ªåº“åŒ…ï¼Œå¹¶ä¸”å®Œæˆä»¥ä¸‹ç›®å½•ç»“æ„çš„å¡«ç©º:
Q:
```sh
# å¡«ç©º
.
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ __
â”‚Â Â  â””â”€â”€ __
```
A:
```sh
# å¡«ç©º
.
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ main.rs
â”‚Â Â  â””â”€â”€ lib.rs
```
åœ¨ä¸Šä¸€ä¸ªæ­¥éª¤åï¼Œæˆ‘ä»¬çš„ hello-package ä¸­å·²ç»å­˜åœ¨ä¸¤ä¸ªåŒ…ï¼šä¸€ä¸ªäºŒè¿›åˆ¶åŒ…å’Œä¸€ä¸ªåº“åŒ…ï¼Œä¸¤ä¸ªåŒ…çš„åç§°éƒ½ä¸ package ç›¸åŒï¼šhello-packageã€‚
### 6.ğŸŒŸğŸŒŸğŸŒŸ ä¸€ä¸ª package æœ€å¤šåªèƒ½åŒ…å«ä¸€ä¸ªåº“åŒ…ï¼Œä½†æ˜¯å´å¯ä»¥åŒ…å«å¤šä¸ªäºŒè¿›åˆ¶åŒ…ï¼šé€šè¿‡å°†äºŒè¿›åˆ¶æ–‡ä»¶æ”¾å…¥åˆ° src/bin ç›®å½•ä¸‹å®ç°: è¯¥ç›®å½•ä¸‹çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶åŒ…ï¼ŒåŒ…åä¸æ–‡ä»¶åç›¸åŒï¼Œä¸å†ä¸ package çš„åç§°ç›¸åŒã€‚
Q:
```sh
# åˆ›å»ºä¸€ä¸ª package åŒ…å«ä»¥ä¸‹åŒ…ï¼š
# 1. ä¸‰ä¸ªäºŒè¿›åˆ¶åŒ…: `hello-package`, `main1` and `main2`
# 2. ä¸€ä¸ªåº“åŒ…
# å¹¶å®Œæˆä»¥ä¸‹ç›®å½•ç»“æ„çš„å¡«ç©º
.
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ __
â”‚   â”œâ”€â”€ __
â”‚   â””â”€â”€ __
â”‚       â””â”€â”€ __
â”‚       â””â”€â”€ __
â”œâ”€â”€ tests # å­˜æ”¾é›†æˆæµ‹è¯•æ–‡ä»¶çš„ç›®å½•
â”‚   â””â”€â”€ some_integration_tests.rs
â”œâ”€â”€ benches # å­˜æ”¾ benchmark æ–‡ä»¶çš„ç›®å½•dir for benchmark files
â”‚   â””â”€â”€ simple_bench.rs
â””â”€â”€ examples # å­˜æ”¾ç¤ºä¾‹æ–‡ä»¶çš„ç›®å½•
    â””â”€â”€ simple_example.rs
```
A:
```sh
# åˆ›å»ºä¸€ä¸ª package åŒ…å«ä»¥ä¸‹åŒ…ï¼š
# 1. ä¸‰ä¸ªäºŒè¿›åˆ¶åŒ…: `hello-package`, `main1` and `main2`
# 2. ä¸€ä¸ªåº“åŒ…
# å¹¶å®Œæˆä»¥ä¸‹ç›®å½•ç»“æ„çš„å¡«ç©º
.
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ main.rs
â”‚   â”œâ”€â”€ lib.rs
â”‚   â””â”€â”€ bin
â”‚       â””â”€â”€ main1.rs
â”‚       â””â”€â”€ main2.rs
â”œâ”€â”€ tests # å­˜æ”¾é›†æˆæµ‹è¯•æ–‡ä»¶çš„ç›®å½•
â”‚   â””â”€â”€ some_integration_tests.rs
â”œâ”€â”€ benches # å­˜æ”¾ benchmark æ–‡ä»¶çš„ç›®å½•dir for benchmark files
â”‚   â””â”€â”€ simple_bench.rs
â””â”€â”€ examples # å­˜æ”¾ç¤ºä¾‹æ–‡ä»¶çš„ç›®å½•
    â””â”€â”€ simple_example.rs
```
å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„ package ç»“æ„éå¸¸æ ‡å‡†ï¼Œä½ å¯ä»¥åœ¨å¾ˆå¤š Rust é¡¹ç›®ä¸­çœ‹åˆ°è¯¥ç»“æ„çš„èº«å½±ã€‚